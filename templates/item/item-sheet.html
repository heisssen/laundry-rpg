<form class="{{cssClass}} laundry-rpg" autocomplete="off">
    <header class="sheet-header">
        <img class="profile-img" src="{{item.img}}" data-edit="img" title="{{item.name}}" />
        <div class="header-fields">
            <h1 class="charname">
                <input name="name" type="text" value="{{item.name}}" placeholder="{{localize 'LAUNDRY.Name'}}" />
            </h1>
            <div class="item-type-badge">{{item.type}}</div>
        </div>
    </header>

    <nav class="sheet-tabs tabs" data-group="primary">
        <a class="item" data-tab="description">{{localize "LAUNDRY.Description"}}</a>
        <a class="item" data-tab="details">{{localize "LAUNDRY.Details"}}</a>
    </nav>

    <section class="sheet-body">

        {{!-- Description --}}
        <div class="tab description" data-group="primary" data-tab="description">
            {{editor system.description target="system.description" button=true owner=owner editable=editable}}
        </div>

        {{!-- Details — type-specific fields --}}
        <div class="tab details" data-group="primary" data-tab="details">

            {{!-- ── SKILL ─────────────────────────────── --}}
            {{#if (laundryEq item.type "skill")}}
            <div class="form-group">
                <label>{{localize "LAUNDRY.RelatedAttribute"}}</label>
                <select name="system.attribute">
                    {{#each config.attributes as |attr key|}}
                    <option value="{{key}}" {{#if (laundryEq key ../system.attribute)}}selected{{/if}}>{{attr.label}}</option>
                    {{/each}}
                </select>
            </div>
            <div class="form-group">
                <label>{{localize "LAUNDRY.Training"}}</label>
                <input type="number" name="system.training" value="{{system.training}}" min="0" max="3" />
            </div>
            <div class="form-group">
                <label>{{localize "LAUNDRY.Focus"}}</label>
                <input type="number" name="system.focus" value="{{system.focus}}" min="0" max="3" />
            </div>
            {{/if}}

            {{!-- ── ASSIGNMENT ────────────────────────── --}}
            {{#if (laundryEq item.type "assignment")}}
            <h3>{{localize "LAUNDRY.BaseAttributes"}}</h3>
            <div class="grid grid-3col">
                <div class="form-group">
                    <label>{{localize "LAUNDRY.Body"}}</label>
                    <input type="number" name="system.attributes.body" value="{{system.attributes.body}}" />
                </div>
                <div class="form-group">
                    <label>{{localize "LAUNDRY.Mind"}}</label>
                    <input type="number" name="system.attributes.mind" value="{{system.attributes.mind}}" />
                </div>
                <div class="form-group">
                    <label>{{localize "LAUNDRY.Spirit"}}</label>
                    <input type="number" name="system.attributes.spirit" value="{{system.attributes.spirit}}" />
                </div>
            </div>
            <div class="form-group">
                <label>{{localize "LAUNDRY.CoreSkills"}} <em>({{localize "LAUNDRY.CommaSeparated"}})</em></label>
                <input type="text" name="system.coreSkills" value="{{system.coreSkills}}" />
            </div>
            <div class="form-group">
                <label>Core Skill</label>
                <input type="text" name="system.coreSkill" value="{{system.coreSkill}}" />
            </div>
            <div class="form-group">
                <label>Skill Options <em>({{localize "LAUNDRY.CommaSeparated"}})</em></label>
                <input type="text" name="system.skillOptions" value="{{system.skillOptions}}" />
            </div>
            <div class="form-group">
                <label>Skill XP Budget</label>
                <input type="number" name="system.skillXP" value="{{system.skillXP}}" min="0" />
            </div>
            <div class="form-group">
                <label>{{localize "LAUNDRY.CoreTalent"}}</label>
                <input type="text" name="system.coreTalent" value="{{system.coreTalent}}" />
            </div>
            <div class="form-group">
                <label>{{localize "LAUNDRY.Talents"}} <em>({{localize "LAUNDRY.CommaSeparated"}})</em></label>
                <input type="text" name="system.talents" value="{{system.talents}}" />
            </div>
            <div class="form-group">
                <label>Talent Choices</label>
                <input type="number" name="system.talentChoices" value="{{system.talentChoices}}" min="0" />
            </div>
            <div class="form-group">
                <label>{{localize "LAUNDRY.StartingEquipment"}} <em>({{localize "LAUNDRY.CommaSeparated"}})</em></label>
                <input type="text" name="system.equipment" value="{{system.equipment}}" />
            </div>
            <p class="notes">{{localize "LAUNDRY.AssignmentDragHint"}}</p>
            {{/if}}

            {{!-- ── WEAPON ────────────────────────────── --}}
            {{#if (laundryEq item.type "weapon")}}
            <div class="form-group">
                <label>{{localize "LAUNDRY.Damage"}}</label>
                <input type="text" name="system.damage" value="{{system.damage}}" placeholder="e.g. 2d6" />
            </div>
            <div class="form-group">
                <label>{{localize "LAUNDRY.Range"}}</label>
                <input type="text" name="system.range" value="{{system.range}}" placeholder="e.g. Close / Short / Long" />
            </div>
            <div class="form-group">
                <label>{{localize "LAUNDRY.LinkedSkill"}}</label>
                <input type="text" name="system.skill" value="{{system.skill}}" placeholder="e.g. Close Combat" />
            </div>
            <div class="form-group">
                <label>{{localize "LAUNDRY.Traits"}}</label>
                <input type="text" name="system.traits" value="{{system.traits}}" placeholder="e.g. Lethal, Concealable" />
            </div>
            <div class="form-group">
                <label>Ammo</label>
                <input type="number" name="system.ammo" value="{{system.ammo}}" min="0" />
            </div>
            <div class="form-group">
                <label>Ammo Max</label>
                <input type="number" name="system.ammoMax" value="{{system.ammoMax}}" min="0" />
            </div>
            <div class="form-group">
                <label>{{localize "LAUNDRY.Equipped"}}</label>
                <input type="checkbox" name="system.equipped" {{#if system.equipped}}checked{{/if}} />
            </div>
            {{/if}}

            {{!-- ── ARMOUR ────────────────────────────── --}}
            {{#if (laundryEq item.type "armour")}}
            <div class="form-group">
                <label>{{localize "LAUNDRY.Protection"}}</label>
                <input type="number" name="system.protection" value="{{system.protection}}" min="0" />
            </div>
            <div class="form-group">
                <label>{{localize "LAUNDRY.Traits"}}</label>
                <input type="text" name="system.traits" value="{{system.traits}}" />
            </div>
            <div class="form-group">
                <label>{{localize "LAUNDRY.Equipped"}}</label>
                <input type="checkbox" name="system.equipped" {{#if system.equipped}}checked{{/if}} />
            </div>
            {{/if}}

            {{!-- ── GEAR ──────────────────────────────── --}}
            {{#if (laundryEq item.type "gear")}}
            <div class="form-group">
                <label>{{localize "LAUNDRY.Quantity"}}</label>
                <input type="number" name="system.quantity" value="{{system.quantity}}" min="0" />
            </div>
            <div class="form-group">
                <label>{{localize "LAUNDRY.Weight"}}</label>
                <input type="number" name="system.weight" value="{{system.weight}}" min="0" step="0.5" />
            </div>
            {{/if}}

            {{!-- ── TALENT ────────────────────────────── --}}
            {{#if (laundryEq item.type "talent")}}
            <div class="form-group">
                <label>{{localize "LAUNDRY.Requirements"}}</label>
                <input type="text" name="system.requirements" value="{{system.requirements}}"
                       placeholder="e.g. Mind 3+" />
            </div>
            {{/if}}

            {{!-- ── SPELL ─────────────────────────────── --}}
            {{#if (laundryEq item.type "spell")}}
            <div class="form-group">
                <label>{{localize "LAUNDRY.Level"}}</label>
                <input type="number" name="system.level" value="{{system.level}}" min="1" max="5" />
            </div>
            <div class="form-group">
                <label>{{localize "LAUNDRY.DN"}}</label>
                <input type="number" name="system.dn"
                       value="{{#if system.dn}}{{system.dn}}{{else}}4{{/if}}"
                       min="2" max="6" />
            </div>
            <div class="form-group">
                <label>{{localize "LAUNDRY.Complexity"}}</label>
                <input type="number" name="system.complexity"
                       value="{{#if system.complexity}}{{system.complexity}}{{else}}{{system.level}}{{/if}}"
                       min="1" max="10" />
            </div>
            <div class="form-group">
                <label>{{localize "LAUNDRY.CastingTime"}}</label>
                <input type="text" name="system.castingTime" value="{{system.castingTime}}"
                       placeholder="e.g. 1 action" />
            </div>
            <div class="form-group">
                <label>{{localize "LAUNDRY.Target"}}</label>
                <input type="text" name="system.target" value="{{system.target}}"
                       placeholder="e.g. 1 person or object" />
            </div>
            <div class="form-group">
                <label>{{localize "LAUNDRY.Range"}}</label>
                <input type="text" name="system.range" value="{{system.range}}"
                       placeholder="e.g. Close / Medium / Long" />
            </div>
            <div class="form-group">
                <label>{{localize "LAUNDRY.Duration"}}</label>
                <input type="text" name="system.duration" value="{{system.duration}}"
                       placeholder="e.g. 1 day" />
            </div>
            <div class="form-group">
                <label>{{localize "LAUNDRY.School"}}</label>
                <input type="text" name="system.school" value="{{system.school}}"
                       placeholder="e.g. Protection" />
            </div>
            {{/if}}

        </div>
    </section>
</form>
